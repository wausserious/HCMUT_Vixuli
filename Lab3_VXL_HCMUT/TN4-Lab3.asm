LCD_E 		BIT	P3.4
LCD_RS		BIT	P3.5
LCDADDR		EQU	6000H
ORG 2000H
MAIN:
	ACALL READADC
	MOV B,#10
	DIV AB
	MOV R1,B
	MOV B,#10
	DIV AB
	MOV R2,B
	MOV R3,A
	ACALL CLEAR
	ACALL INIT_LCD
	MOV A,R3
	ACALL DISPLAYSTRING
	MOV A,R2
	ACALL DISPLAYSTRING
	MOV A,R1
	ACALL DISPLAYSTRING
	ACALL DELAY1
	SJMP MAIN
INIT_LCD:
	MOV A, #38H
	ACALL WRITECOM
	MOV A, #80H
	ACALL WRITECOM
	MOV A, #0EH
	ACALL WRITECOM
	MOV A, #06H
	ACALL WRITECOM
	RET
CLEAR:
	MOV A, #01H
	ACALL WRITECOM
	RET
WRITECOM:
	MOV DPTR, #LCDADDR
	SETB LCD_E
	CLR LCD_RS
	MOVX @DPTR, A
	CLR LCD_E
	ACALL WAIT_LCD
	RET
WRITETEXT:
	MOV DPTR, #LCDADDR
	SETB LCD_E
	SETB LCD_RS
	MOVX @DPTR, A
	CLR LCD_E
	ACALL WAIT_LCD
	RET
READADC:
	MOV DPTR,#4000H
	MOVX @DPTR,A
	ACALL DELAY
	MOVX A,@DPTR
	MOV R0,A
	RET
DISPLAYSTRING:
	MOV DPTR,#HEX
	MOVC A,@A+DPTR
	ACALL WRITETEXT
	RET
WAIT_LCD:
  	MOV R6,#6
DL1:
	MOV R7, #250
	DJNZ R7, $
	DJNZ R6,DL1
	RET
DELAY:
	MOV R7, #60
	DJNZ R7,$
	RET
DELAY1:
	MOV R6,#120
LAP1:
	MOV R7,#250
	DJNZ R7,$
	DJNZ R6,LAP1															 
	RET
HEX:
	DB	30H, 31H, 32H, 33H, 34H, 35H, 36H, 37H, 38H, 39H
	END